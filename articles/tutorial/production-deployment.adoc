---
title: Production Deployment
order: 160
page-title: "Deploying a Vaadin Flow Application on Azure"
description: Learn how to prepare a Vaadin application for production and to deploy it on Heroku.
---

= Deploying a Vaadin Flow Application on Azure

In this final chapter in the series, you learn how to deploy a Spring Boot application on https://azure.microsoft.com[Azure].
In the tutorial we will use Azure Container Apps for its simplicity. 
For a larger scale deployment and best possible end user experience, consider using Azure Kubernetes Service together with https://vaadin.com/clustering[Vaadin Kubernets Kit].

This chapter covers:

* Vaadin production builds.
* Packaging Vaadin app as a Docker image.
* Deploying Docker packaged web app using Azure Container Apps.
* Tips for production deployment.

.Vaadin can be deployed on any cloud provider
[TIP]
From Cloud providers point of view, Vaadin is standard Java Web application. You can deploy your application onto pretty much any cloud platform, in many different ways.
Read the <<{articles}/production/cloud-providers#, Cloud Deployment tutorials>> for more options.

== Preparing the Application for Production

It's important to build a separate production-optimized version of the application before deploying it.
In development mode, Vaadin has a live-reload widget, debug logging, and uses a quick, but unoptimized, frontend build that includes source maps for easy debugging, that is maintained using npm and Vite.
Unoptimized frontend bundles can contain several megabytes of JavaScript and dependecies, that are not needed during production deployment.

The [filename]`pom.xml` file includes a `production` profile configuration that prepares an optimized build which is ready for production.
Use following command to build a production ready jar file:


[source,bash]
----
mvn install -Pproduction
----

== Deployment using Azure Container Apps

To use Azure Container Apps, you'll need to:

  1. Install and run Docker (for example using https://www.docker.com/products/docker-desktop/[Docker Desktop])
  2. Install https://learn.microsoft.com/en-us/cli/azure/install-azure-cli[Azure CLI]. 
  3. Log into https://azure.microsoft.com[Azure] using a browser and make sure you have an active Azure subscription (use Start Free Trial, if you don't have an existing one).

In your command commmand line, login using Azure CLI:

[source,bash]
----
az login
----

Docker image is a basic building block used by many modern hosting solutions to run your application. 
The example project contains a simple ready made `Dockerfile` that essentially describes how the jar file build in previous step should be run.

Azure Container Apps contains handy `up` command, that does lot of convention based setup for Docker based deployments. 
With a single command, Azure tooling builds a Docker image, pushes it to a custom project specific Docker registry and creates a single node deployment based on it.

[source,bash]
----
az containerapp up -n my-crm-app --source .
----

The `my-crm-app` is the name for your application in Azure.
If this is your first time using Azure Container Apps, the CLI will ask to install some new components.

The first deployment can easily take several minutes, depending on the speed of your computer and network. Once the deployment is finished, you should see the URL to your newly deployed Vaadin application at the end of the command output.

.Avoid data loss
[WARNING]
====
This application uses in-memory H2 database by defaul, which is handy for development. The database is re-created on each deployment and is embedded for each node. For an actual usage, you should switch to your preferred database (at least in the production profile), use `ddl-auto=none` and start to use a database migration tool like https://www.liquibase.org/[Liquibase] or https://flywaydb.org/[Flyway], so you can evolve the database schema without losing data. Check Spring & Azure docs for more.
====

Refer to https://learn.microsoft.com/en-us/azure/container-apps/[Azure Container Apps documentation] for more details how to configure your deployment. Note, that the horizontal scaling don't yet work with Vaadin apps (session affinity for Container Apps ingress is currently in development), but you can configure the node a larger one to scale up your app. For large scale deployments, you should look into https://vaadin.com/clustering[Kubernetes based clustering solutions].

== Conclusion and Next Steps

Congratulations.
You have now built a full-stack web app in pure Java and deployed it to Azure.

Did you like the tutorial?
Did you find anything that did not seem right?
Reach out to Vaadin on Twitter https://twitter.com/vaadin[@vaadin] or https://discord.gg/vaadin[Vaadin's Discord chat] server.

Now that you have a running application, you can use it to experiment further or as a foundation for your next idea.

Happy hacking, and ping https://twitter.com/vaadin[@vaadin] on Twitter to show off the cool stuff you have built.

=== Helpful Links

- https://github.com/vaadin-learning-center/crm-tutorial[Source code GitHub repository]
- https://discord.gg/vaadin[Vaadin Discord chat]
- https://stackoverflow.com/questions/ask?tags=vaadin[Stack Overflow]
- <<{articles}/overview#,Flow documentation>>
- <<{articles}/components#,Vaadin components>>
- https://vaadin.com/comparison[Compare Vaadin with React, Angular, and Vue]

include::{root}/articles/tutorial/_ebook-banner.adoc[opts=optional]


[discussion-id]`01A3D231-9D1B-4D4D-A6BB-CB4D37E01CBE`
